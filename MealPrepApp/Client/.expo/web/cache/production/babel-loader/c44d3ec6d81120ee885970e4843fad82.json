{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useEffect,useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Image from\"react-native-web/dist/exports/Image\";import Animated from\"react-native-web/dist/exports/Animated\";import{icons,images,SIZES,COLORS,FONTS}from\"../constants\";import ShopServices from\"../../services/ShopServices\";function Company(_ref){var route=_ref.route,navigation=_ref.navigation;var scrollX=new Animated.Value(0);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),company=_useState2[0],setCompany=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),menu=_useState4[0],setMenu=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),orderItems=_useState6[0],setOrderItems=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),orderQuantity=_useState8[0],setOrderQuantity=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),orderTotal=_useState10[0],setOrderTotal=_useState10[1];useEffect(function(){var item=route.params.item;setCompany(item);ShopServices.getShopMenu(company==null?void 0:company.id).then(function(items){return setMenu(items);});});function editOrder(action,selectedItem){var orderList=orderItems.slice();var currentItem=orderList.filter(function(item){return item.menuId==selectedItem.id;});if(action==\"+\"){if(currentItem.length>0){var newQty=currentItem[0].qty+1;currentItem[0].qty=newQty;}else{var _currentItem={name:selectedItem,menuId:selectedItem.id,qty:1};orderList.push(_currentItem);}setOrderItems(orderList);}else{if(currentItem.length>0){var _currentItem$;if(((_currentItem$=currentItem[0])==null?void 0:_currentItem$.qty)>0){var _newQty=currentItem[0].qty-1;currentItem[0].qty=_newQty;}}setOrderItems(orderList);}}function getOrderQuantity(selectedItem){var orderItem=orderItems.filter(function(item){return item.menuId==selectedItem.id;});if(orderItem.length>0){return orderItem[0].qty;}return 0;}function getOrderCount(){var itemCount=orderItems.reduce(function(counter,item){return counter+(item.qty||0);},0);return itemCount;}function getOrderTotal(){var total=orderItems.reduce(function(counter,item){return counter+(item.name.price*item.qty||0);},0);return total.toFixed(2);}function renderHeader(){return React.createElement(View,{style:{flexDirection:'row'}},React.createElement(TouchableOpacity,{style:{width:50,paddingLeft:SIZES.padding*2,justifyContent:'center',paddingBottom:80},onPress:function onPress(){return navigation.navigate(\"Home\");}},React.createElement(Image,{source:icons.back,resizeMode:\"contain\",style:{width:30,height:30}})),React.createElement(View,{style:{flex:1,alignItems:'center',justifyContent:'center'}},React.createElement(View,{style:{height:50,alignItems:'center',justifyContent:'center',paddingHorizontal:SIZES.padding*3,borderRadius:SIZES.radius,borderWidth:1,borderColor:COLORS.lightGray1,backgroundColor:COLORS.lightGray3}},React.createElement(Text,{style:_objectSpread({},FONTS.h3)},company==null?void 0:company.name))),React.createElement(TouchableOpacity,{style:{width:50,paddingRight:SIZES.padding*2,justifyContent:'center'}},React.createElement(Image,{source:icons.list,resizeMode:\"contain\",style:{width:30,height:30,tintColor:COLORS.lightGray2}})));}function renderFoodInfo(){return React.createElement(Animated.ScrollView,{horizontal:true,pagingEnabled:true,scrollEventThrottle:16,snapToAlignment:\"center\",showsHorizontalScrollIndicator:false,onScroll:Animated.event([{nativeEvent:{contentOffset:{x:scrollX}}}],{useNativeDriver:false})},menu==null?void 0:menu.setMealList.map(function(selectedItem,index){return React.createElement(View,{key:\"menu-\"+index,style:{alignItems:'center'}},React.createElement(View,{style:{alignItems:'center',flex:1,flexDirection:\"column\",justifyContent:\"flex-start\",marginLeft:30,marginRight:30,alignItems:\"left\"},key:function key(item){return\"basket-\"+item.id;}},React.createElement(Image,{source:{uri:selectedItem.imageUrl},resizeMode:\"contain\",style:{width:\"100%\",height:100,flex:1,marginBottom:10}}),React.createElement(View,{style:{position:'absolute',bottom:-20,width:SIZES.width,height:50,justifyContent:'center',flexDirection:'row'}},React.createElement(TouchableOpacity,{style:{width:50,backgroundColor:COLORS.white,alignItems:'center',justifyContent:'center',borderTopLeftRadius:25,borderBottomLeftRadius:25},onPress:function onPress(){return editOrder(\"-\",selectedItem);}},React.createElement(Text,{style:_objectSpread({},FONTS.body1)},\" - \")),React.createElement(View,{style:{width:50,backgroundColor:COLORS.white,alignItems:'center',justifyContent:'center'}},React.createElement(Text,{style:_objectSpread({},FONTS.h2)},getOrderQuantity(selectedItem))),React.createElement(TouchableOpacity,{style:{width:50,backgroundColor:COLORS.white,alignItems:'center',justifyContent:'center',borderTopRightRadius:25,borderBottomRightRadius:25},onPress:function onPress(){return editOrder(\"+\",selectedItem);}},React.createElement(Text,{style:_objectSpread({},FONTS.body1)},\" + \")))),React.createElement(View,{style:{width:SIZES.width,alignItems:'center',marginTop:15,paddingHorizontal:SIZES.padding*2}},React.createElement(Text,{style:_objectSpread({marginVertical:10,textAlign:'center'},FONTS.h2)},selectedItem.name),React.createElement(Text,{style:_objectSpread(_objectSpread({},FONTS.body3),{},{color:\"grey\"})},selectedItem.description)),React.createElement(View,{style:{flexDirection:'row',marginTop:10}},React.createElement(Image,{source:icons.fire,style:{width:20,height:20,marginRight:10}}),React.createElement(Text,{style:_objectSpread(_objectSpread({},FONTS.body3),{},{color:COLORS.darygray})},selectedItem.calories,\" cal - P:\",selectedItem.protein,\" F:\",selectedItem.fats,\" C:\",selectedItem.carbs)));}));}function renderOrder(){return React.createElement(View,null,React.createElement(View,{style:{backgroundColor:COLORS.white,borderTopLeftRadius:40,borderTopRightRadius:40}},React.createElement(View,{style:{flexDirection:'row',justifyContent:'space-between',paddingVertical:SIZES.padding*2,paddingHorizontal:SIZES.padding*3,borderBottomColor:COLORS.lightGray2,borderBottomWidth:1}},React.createElement(Text,{style:_objectSpread({},FONTS.h3)},\" \",getOrderCount(),\" items in Cart\"),React.createElement(Text,{style:_objectSpread({},FONTS.h3)},\" \\xA3\",getOrderTotal())),React.createElement(View,{style:{padding:SIZES.padding*2,alignItems:'center',justifyContent:'center'}},React.createElement(TouchableOpacity,{style:{width:SIZES.width*0.9,padding:SIZES.padding,backgroundColor:COLORS.primary,alignItems:'center',borderRadius:SIZES.radius},onPress:function onPress(){return navigation.navigate(\"Basket\",{company:company,orderItems:orderItems,menu:menu,total:{getOrderTotal:getOrderTotal}});}},React.createElement(Text,{style:_objectSpread({color:COLORS.white},FONTS.h2)},\"Order\")))));}return React.createElement(SafeAreaView,{style:styles.container},renderHeader(),renderFoodInfo(),renderOrder());}var styles=StyleSheet.create({container:{flex:1,backgroundColor:COLORS.lightGray2}});export default Company;","map":{"version":3,"sources":["/Users/craigwilsonmusic/codeclan_work/projects/MealPrepAppV2/prep_app/MealPrepApp/Client/app/screens/Company.js"],"names":["React","useEffect","useState","icons","images","SIZES","COLORS","FONTS","ShopServices","Company","route","navigation","scrollX","Animated","Value","company","setCompany","menu","setMenu","orderItems","setOrderItems","orderQuantity","setOrderQuantity","orderTotal","setOrderTotal","item","params","getShopMenu","id","then","items","editOrder","action","selectedItem","orderList","slice","currentItem","filter","menuId","length","newQty","qty","name","push","getOrderQuantity","orderItem","getOrderCount","itemCount","reduce","counter","getOrderTotal","total","price","toFixed","renderHeader","flexDirection","width","paddingLeft","padding","justifyContent","paddingBottom","navigate","back","height","flex","alignItems","paddingHorizontal","borderRadius","radius","borderWidth","borderColor","lightGray1","backgroundColor","lightGray3","h3","paddingRight","list","tintColor","lightGray2","renderFoodInfo","event","nativeEvent","contentOffset","x","useNativeDriver","setMealList","map","index","marginLeft","marginRight","uri","imageUrl","marginBottom","position","bottom","white","borderTopLeftRadius","borderBottomLeftRadius","body1","h2","borderTopRightRadius","borderBottomRightRadius","marginTop","marginVertical","textAlign","body3","color","description","fire","darygray","calories","protein","fats","carbs","renderOrder","paddingVertical","borderBottomColor","borderBottomWidth","primary","styles","container","StyleSheet","create"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport {\n    View, \n    Text,\n    SafeAreaView,\n    StyleSheet,\n    TouchableOpacity,\n    Image,\n    Animated\n} from \"react-native\";\n\nimport { icons, images, SIZES, COLORS, FONTS } from '../constants';\nimport ShopServices from '../../services/ShopServices';\n\nfunction Company({ route, navigation }) {\n    \n        const scrollX = new Animated.Value(0);\n        const [company, setCompany] = useState(null);\n        const [menu, setMenu] = useState(null);\n        // const [orderQuantity, setOrderQuantity] = useState(0);\n        // const [currentMenuId, setCurrentMenuId] = useState(null);\n        const [orderItems, setOrderItems] = useState([]);\n        const [orderQuantity, setOrderQuantity] = useState(0);\n        const [orderTotal, setOrderTotal] = useState(0);\n        \n        useEffect(() => {\n            // setCompany(null)\n            let {item} = route.params;\n            setCompany(item)\n            \n            ShopServices.getShopMenu(company?.id)\n            .then(items => setMenu(items))\n        })\n\n        // useEffect(() => {\n        //     orderTotal\n        // }, [getOrderQuantity])\n\n\n        function editOrder(action, selectedItem) {\n            \n            let orderList = orderItems.slice() \n            let currentItem = orderList.filter(item => item.menuId == selectedItem.id)\n\n            if (action == \"+\") {\n                if (currentItem.length > 0) {\n                    let newQty = currentItem[0].qty + 1\n                    currentItem[0].qty = newQty\n                } else {\n                    const currentItem = {\n                        name: selectedItem,\n                        menuId: selectedItem.id,\n                        qty: 1\n                    }\n                    orderList.push(currentItem)\n                }\n    \n                setOrderItems(orderList)\n            } else {\n                if (currentItem.length > 0) {\n                    if (currentItem[0]?.qty > 0) {\n                        let newQty = currentItem[0].qty - 1\n                        currentItem[0].qty = newQty\n                    }\n                }\n    \n                setOrderItems(orderList)\n            }\n            // console.log(orderList);\n        }\n            \n        function getOrderQuantity(selectedItem) {\n            let orderItem = orderItems.filter(item => item.menuId == selectedItem.id)\n\n            if (orderItem.length > 0) {\n                return orderItem[0].qty\n            }\n    \n            return 0\n        }\n\n        function getOrderCount() {\n            let itemCount = orderItems.reduce((counter, item) => counter + (item.qty || 0), 0)\n            return itemCount;\n        }\n\n        function getOrderTotal() {\n            let total = orderItems.reduce((counter, item) => counter + (item.name.price * item.qty || 0), 0)\n            // setOrderTotal(total);\n            return total.toFixed(2);\n        }\n\n    function renderHeader() {\n        return (\n            <View style={{ flexDirection: 'row' }}>\n                <TouchableOpacity\n                    style={{\n                        width: 50,\n                        paddingLeft: SIZES.padding * 2,\n                        justifyContent: 'center',\n                        paddingBottom: 80\n                    }}\n                    onPress={() => navigation.navigate(\"Home\")}\n                    // onPress={() => this.props.navigation.push(\"Home\")}\n                >\n                    <Image\n                        source={icons.back}\n                        resizeMode=\"contain\"\n                        style={{\n                            width: 30,\n                            height: 30\n                        }}\n                    />\n                </TouchableOpacity>\n\n                {/* Restaurant Name Section */}\n                <View\n                    style={{\n                        flex: 1,\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                    }}\n                >\n                    <View\n                        style={{\n                            height: 50,\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            paddingHorizontal: SIZES.padding * 3,\n                            borderRadius: SIZES.radius,\n                            borderWidth: 1,\n                            borderColor: COLORS.lightGray1,\n                            backgroundColor: COLORS.lightGray3\n                        }}\n                    >\n                        <Text style={{ ...FONTS.h3 }}>{company?.name}</Text>\n                    </View>\n                </View>\n\n                <TouchableOpacity\n                    style={{\n                        width: 50,\n                        paddingRight: SIZES.padding * 2,\n                        justifyContent: 'center'\n                    }}\n                >\n                    <Image\n                        source={icons.list}\n                        resizeMode=\"contain\"\n                        style={{\n                            width: 30,\n                            height: 30,\n                            tintColor: COLORS.lightGray2\n                        }}\n                    />\n                </TouchableOpacity>\n            </View>\n        )\n    }\n\n    function renderFoodInfo() {\n        \n        return (\n            <Animated.ScrollView\n                horizontal\n                pagingEnabled\n                scrollEventThrottle={16}\n                snapToAlignment=\"center\"\n                showsHorizontalScrollIndicator={false}\n                onScroll={Animated.event([\n                    { nativeEvent: { contentOffset: { x: scrollX } } }\n                ], { useNativeDriver: false })}\n            >\n                {\n                    menu?.setMealList.map((selectedItem, index) => (\n                        <View\n                            key={`menu-${index}`}\n                            style={{ alignItems: 'center' }}\n                        >\n                            <View\n                                style={{ alignItems: 'center', \n                                flex: 1, \n                                flexDirection: \"column\", \n                                justifyContent: \"flex-start\",\n                                marginLeft: 30,\n                                marginRight: 30,\n                                alignItems: \"left\"\n                                }}\n                                key={item => `basket-${item.id}`}\n                                >\n                                {/* Food Image */}\n                                <Image\n                                    source={{uri: selectedItem.imageUrl}}\n                                    resizeMode=\"contain\"\n                                    style={{\n                                        width: \"100%\",\n                                        height: 100,\n                                        // borderRadius: 20,\n                                        flex: 1,\n                                        marginBottom: 10\n                                    }}\n                                />\n\n                                {/* Quantity */}\n                                <View\n                                    style={{\n                                        position: 'absolute',\n                                        bottom: - 20,\n                                        width: SIZES.width,\n                                        height: 50,\n                                        justifyContent: 'center',\n                                        flexDirection: 'row'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            width: 50,\n                                            backgroundColor: COLORS.white,\n                                            alignItems: 'center',\n                                            justifyContent: 'center',\n                                            borderTopLeftRadius: 25,\n                                            borderBottomLeftRadius: 25\n                                        }}\n                                        onPress={() => editOrder(\"-\", selectedItem)}\n                                    >\n                                        <Text style={{ ...FONTS.body1 }}> - </Text>\n                                    </TouchableOpacity>\n\n                                    <View\n                                        style={{\n                                            width: 50,\n                                            backgroundColor: COLORS.white,\n                                            alignItems: 'center',\n                                            justifyContent: 'center'\n                                        }}\n                                    >\n                                          <Text style={{ ...FONTS.h2 }}>{getOrderQuantity(selectedItem)}</Text>\n                                    </View>\n\n                                    <TouchableOpacity\n                                        style={{\n                                            width: 50,\n                                            backgroundColor: COLORS.white,\n                                            alignItems: 'center',\n                                            justifyContent: 'center',\n                                            borderTopRightRadius: 25,\n                                            borderBottomRightRadius: 25\n                                        }}\n                                        onPress={() => editOrder(\"+\", selectedItem)}\n                                    >\n                                        <Text style={{ ...FONTS.body1 }}> + </Text>\n                                    </TouchableOpacity>\n                                </View>\n                            </View>\n\n                            {/* Name & Description */}\n                            <View\n                                style={{\n                                    width: SIZES.width,\n                                    alignItems: 'center',\n                                    marginTop: 15,\n                                    paddingHorizontal: SIZES.padding * 2\n                                }}\n                            >\n                                <Text style={{ marginVertical: 10, textAlign: 'center', ...FONTS.h2 }}>{selectedItem.name}</Text>\n                                <Text style={{ ...FONTS.body3, color: \"grey\" }}>{selectedItem.description}</Text>\n                            </View>\n\n                            {/* Calories */}\n                            <View\n                                style={{\n                                    flexDirection: 'row',\n                                    marginTop: 10\n                                }}\n                            >\n                                <Image\n                                    source={icons.fire}\n                                    style={{\n                                        width: 20,\n                                        height: 20,\n                                        marginRight: 10\n                                    }}\n                                />\n\n                                <Text style={{\n                                    ...FONTS.body3, color: COLORS.darygray\n                                }}>{selectedItem.calories} cal - P:{selectedItem.protein} F:{selectedItem.fats} C:{selectedItem.carbs}</Text>\n                            </View>\n                        </View>\n                    ))\n                }\n            </Animated.ScrollView>\n        )\n    }\n\n    function renderOrder() {\n        return (\n            <View>\n                <View\n                    style={{\n                        backgroundColor: COLORS.white,\n                        borderTopLeftRadius: 40,\n                        borderTopRightRadius: 40\n                    }}\n                >\n                    <View\n                        style={{\n                            flexDirection: 'row',\n                            justifyContent: 'space-between',\n                            paddingVertical: SIZES.padding * 2,\n                            paddingHorizontal: SIZES.padding * 3,\n                            borderBottomColor: COLORS.lightGray2,\n                            borderBottomWidth: 1\n                        }}\n                    >\n                        <Text style={{ ...FONTS.h3 }}> {getOrderCount()} items in Cart</Text>\n                        <Text style={{ ...FONTS.h3 }}> £{getOrderTotal()}</Text>\n                    </View>\n                        {/* Order Button */}\n                    <View\n                        style={{\n                            padding: SIZES.padding * 2,\n                            alignItems: 'center',\n                            justifyContent: 'center'\n                        }}\n                    >\n                        <TouchableOpacity\n                            style={{\n                                width: SIZES.width * 0.9,\n                                padding: SIZES.padding,\n                                backgroundColor: COLORS.primary,\n                                alignItems: 'center',\n                                borderRadius: SIZES.radius\n                            }}\n                            onPress={() => navigation.navigate(\"Basket\", {\n                                company: company,\n                                orderItems: orderItems,\n                                menu: menu,\n                                total: {getOrderTotal}\n                            })}\n                        >\n                            <Text style={{ color: COLORS.white, ...FONTS.h2 }}>Order</Text>\n                        </TouchableOpacity>\n                    </View>\n \n                </View>\n\n\n            </View>\n        )\n    }\n\n    return (\n        <SafeAreaView style={styles.container}>\n            {renderHeader()}\n            {renderFoodInfo()}\n            {renderOrder()}\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n    flex: 1,\n    backgroundColor: COLORS.lightGray2,\n    }\n})\n\nexport default Company;"]},"metadata":{},"sourceType":"module"}